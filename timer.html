<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.jsdelivr.net/npm/comfy.js@latest/dist/comfy.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timer</title>

    <style>
        @font-face {
        font-family: 'MC-font';
        src: url('MinecraftRegular-Bmg3.otf') format('truetype');
        font-weight: normal;
        font-style: normal;
        font-display: swap;
        }
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: transparent;
            overflow: hidden;
        }
        .Timer{
            color: white;
            -webkit-text-stroke: 2px black;
            font-size: 90px;
            letter-spacing: 5px;
            font-family: 'MC-font', serif;
        }
    </style>
</head>
<body>
    <div class="Timer">Time: 00:00</div>
    <script>
        let Time = 0;
        let isRunning = false;
        const display = document.querySelector(".Timer");

        function updateDisplay() {
            let h = Math.floor(Time / 3600);
            let m = Math.floor((Time % 3600) / 60);
            let s = Math.floor(Time % 60);

            let hDisplay = h > 0 ? (h < 10 ? '0' + h : h) + ":" : "";
            let mDisplay = (m < 10 ? '0' + m : m) + ":";
            let sDisplay = s < 10 ? '0' + s : s;

            display.textContent = "Time: " + hDisplay + mDisplay + sDisplay;
        }

        function TimeUp() {
            if (isRunning) {
                Time++;
                updateDisplay();
            }
        }

        ComfyJS.onCommand = (user, command, message, flags) => {
            if (flags.broadcaster || flags.mod) {
                if (command === "start") isRunning = true;
                if (command === "stop") isRunning = false;
                if (command === "reset") {
                    Time = 0;
                    updateDisplay();
                }
                
                if (command === "set") {
                    if (message.includes(":")) {
                        // Obsługa formatu GG:MM:SS lub MM:SS
                        const parts = message.split(":").map(Number);
                        let totalSeconds = 0;

                        if (parts.length === 3) { // GG:MM:SS
                            totalSeconds = (parts[0] * 3600) + (parts[1] * 60) + parts[2];
                        } else if (parts.length === 2) { // MM:SS
                            totalSeconds = (parts[0] * 60) + parts[1];
                        }
                        
                        if (!isNaN(totalSeconds)) {
                            Time = totalSeconds;
                            updateDisplay();
                        }
                    } else {
                        // Obsługa samych sekund (jak wcześniej)
                        let newTime = parseInt(message);
                        if (!isNaN(newTime)) {
                            Time = newTime;
                            updateDisplay();
                        }
                    }
                }
            }
        };

        // WPISZ SWÓJ NICK TUTAJ
        ComfyJS.Init("damiano00o");

        setInterval(TimeUp, 1000);
    </script>
</body>
</html>